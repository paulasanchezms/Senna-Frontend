<app-psychologist-navbar></app-psychologist-navbar>
<ion-content class="font-peachy bg-lightPeach">
  <!-- Área de búsqueda sticky -->
  <div class="sticky top-0 z-10 bg-white p-4 space-y-3 shadow">
    <input
      type="text"
      [(ngModel)]="searchTerm"
      (input)="onInputChange()"
      placeholder="Buscar por nombre o apellido"
      class="w-full bg-lightPeach p-3 rounded-xl border border-salmon"
    />

    <button
      (click)="search()"
      class="w-full bg-lavender text-white font-bold py-3 rounded-full shadow hover:bg-coral transition"
    >
      Buscar
    </button>
  </div>

  <!-- Listado dinámico -->
<div class="bg-lightPeach p-4 space-y-4">
  <div
    *ngFor="let patient of filteredPatients"
    (click)="goToPatientView(patient.id_user)"
    class="bg-white rounded-2xl shadow hover:shadow-lg flex items-center overflow-hidden cursor-pointer"
  >
    <img
      [src]="patient.photoUrl || 'assets/default-avatar.png'"
      alt="Foto del paciente"
      class="w-24 h-24 object-cover rounded-full m-4"
    />
    <div class="flex flex-col justify-center">
      <h3 class="text-lg font-bold text-gray-800">{{ patient.name }} {{ patient.last_name }}</h3>
      <p class="text-sm text-gray-500">{{ patient.email }}</p>
    </div>


  <div *ngIf="filteredPatients.length === 0" class="text-center text-gray-500">
    No se encontraron pacientes.
  </div>
</div>

    <div *ngIf="filteredPatients.length === 0" class="text-center text-gray-500">
      No se encontraron pacientes.
    </div>
  </div>
</ion-content>