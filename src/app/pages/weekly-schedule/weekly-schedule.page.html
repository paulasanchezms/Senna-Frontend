<ion-content class="p-4">
  <h2 class="text-2xl font-semibold text-peach mb-4 text-center">
    Configura tu Horario
  </h2>

  <!-- *ngIf opcional para que el formGroup exista -->
  <form *ngIf="scheduleForm" [formGroup]="scheduleForm" (ngSubmit)="onSave()">
    <div *ngFor="let d of [0,1,2,3,4,5,6]" class="mb-6">
      <ion-card class="p-4">
        <div class="flex justify-between items-center mb-2">
          <span class="font-medium">{{ days[d] }}</span>
          <ion-toggle [formControlName]="'enabled_' + d"></ion-toggle>
        </div>

        <div *ngIf="scheduleForm.get('enabled_' + d)?.value">
          <!-- Mañana -->
          <ion-item lines="none" class="mb-2 flex items-center space-x-2">
            <ion-label>Mañana</ion-label>
            <ion-datetime
              displayFormat="HH:mm"
              pickerFormat="HH:mm"
              [formControlName]="'morningStart_' + d"
            ></ion-datetime>
            <ion-datetime
              displayFormat="HH:mm"
              pickerFormat="HH:mm"
              [formControlName]="'morningEnd_' + d"
            ></ion-datetime>
          </ion-item>
          <!-- Tarde -->
          <ion-item lines="none" class="mb-2 flex items-center space-x-2">
            <ion-label>Tarde</ion-label>
            <ion-datetime
              displayFormat="HH:mm"
              pickerFormat="HH:mm"
              [formControlName]="'afternoonStart_' + d"
            ></ion-datetime>
            <ion-datetime
              displayFormat="HH:mm"
              pickerFormat="HH:mm"
              [formControlName]="'afternoonEnd_' + d"
            ></ion-datetime>
          </ion-item>
        </div>
      </ion-card>
    </div>

    <ion-button expand="block" type="submit" class="bg-salmon text-white">
      Guardar Horario
    </ion-button>
  </form>
</ion-content>