<ng-container *ngIf="user">
<ion-content class="bg-lightPeach min-h-screen flex justify-center items-center">
  <div class="bg-white shadow-xl rounded-2xl p-6 w-full max-w-md flex flex-col items-center space-y-5">

    <!-- Título -->
    <h2 class="text-xl font-bold text-lavender mb-2">Perfil</h2>

    <!-- Imagen de perfil -->
    <div class="relative">
      <img
        [src]="previewUrl || user?.photoUrl || 'https://ui-avatars.com/api/?name=' + user?.name + '+' + user?.last_name"
        alt="Foto de perfil"
        class="w-24 h-24 rounded-full object-cover border-2 border-peach shadow"
      />
      <label class="absolute bottom-0 right-0 bg-white rounded-full shadow-md p-1 cursor-pointer">
        <input type="file" accept="image/*" (change)="onFileSelected($event)" class="hidden" />
        <ion-icon name="camera" class="text-coral text-lg"></ion-icon>
      </label>
    </div>

    <!-- Inputs -->
    <div class="w-full flex flex-col space-y-4">

      <div>
        <label class="text-sm font-semibold text-lavender">Nombre</label>
        <input
          type="text"
          [(ngModel)]="user.name"
          class="w-full bg-white text-gray-800 border border-peach rounded-xl p-2"
        />
      </div>

      <div>
        <label class="text-sm font-semibold text-lavender">Apellidos</label>
        <input
          type="text"
          [(ngModel)]="user.last_name"
          class="w-full bg-white text-gray-800 border border-peach rounded-xl p-2"
        />
      </div>

      <div>
        <label class="text-sm font-semibold text-lavender">Email</label>
        <input
          type="text"
          [value]="user.email"
          disabled
          class="w-full bg-gray-100 text-gray-500 italic cursor-not-allowed border border-peach rounded-xl p-2"
        />
      </div>

      <div>
        <label class="text-sm font-semibold text-lavender">Teléfono</label>
        <input
          type="text"
          [(ngModel)]="user.phone"
          placeholder="No añadido"
          class="w-full bg-white text-gray-800 border border-peach rounded-xl p-2"
        />
      </div>
    </div>

    <!-- Botón -->
    <ion-button
      expand="block"
      fill="solid"
      class="bg-coral text-white rounded-xl font-semibold mt-6 transition-all duration-300 hover:opacity-90"
      (click)="saveChanges()"
    >
      Guardar cambios
    </ion-button>
    <ion-button
    class="block text-salmon hover:text-lavender font-medium"
    (click)="logout()"
  >
    Cerrar sesión
  </ion-button>
  </div>
</ion-content>
</ng-container>